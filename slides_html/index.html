<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>reveal.js</title>

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/source-sans-pro.css">
		<link rel="stylesheet" href="css/theme/black.css">
		<!-- <link rel="stylesheet" href="css/theme/preso.css"> -->

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<script src="js/d3.js" charset='utf-8'></script>

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
<section>
	<div>
		<h2><code>require('crypto')</code></h2>
		<h3>is a human right</h3>
	</div>
	<h4>cascadiafest</h4>
	<h4>2016</h4>
	<aside class='notes'>
		<p>My talk today is going to cover a lot of history, some math, and a couple of code examples</p>
		<p>the title of the talk is about how human rights relates to a part of the node core</p>
	</aside>
</section>

<section>
	<h3>UN Declaration of Human Rights</h3>
	<h4>Article 12</h4>
	<q>
		<div>No one shall be subjected to arbitrary interference</div>
		<div>with their privacy, family, home or correspondence,</div>
		<div>nor to attacks upon their honour and reputation.</div>
		<div>Everyone has the right to the protection of the law</div>
		<div>against such interference or attacks.</div>
	</q>
	<aside class='notes'>
		<p>here is a relevant passage from the UN declaration of human rights that talks about privacy and security</p>
		<p>there are a lot of versions of this in different rights declarations, europe has one, the us, canada has verbiage about this</p>
		<p>I like the UN version because it uses the word attack, which is really strong language. no where else in the document do you get such strong language.  You mostly see words like deprived, and persecution.</p>
		<p>While I'm going to talk a lot about people starting businesses and patent fights between academics, the people doing the fighting are fighting for the rights of everyone to be secure in their correspondence.</p>
	</aside>
</section>

<!-- <section>
	<h3>encryption is about</h3>
	<h1>privacy and verification</h1>
	<aside class='notes'>
		<p>privacy is about keeping your message secret</p>
		<p>verification is about detecting if a message has been tampered with, and identifying the source of the message</p>
		<p>combine privacy and verification and you get security</p>
	</aside>
</section> -->

<section data-background-image=' img/lisa_computer.gif'>
	<h1>&nbsp</h1>
	<h1>&nbsp</h1>
	<h1>&nbsp</h1>
	<h1>&nbsp</h1>
	<h1>the hero</h1>
	<aside class='notes'>
		<p>the hero of the story today is the average person... citizens, you folk, all of us in this room</p>
	</aside>
</section>

<section data-background-image=' img/burns_suits.gif'>
	<h1>&nbsp</h1>
	<h1>&nbsp</h1>
	<h1>&nbsp</h1>
	<h1>&nbsp</h1>
	<h1>the villains</h1>
	<aside class='notes'>
		<p>the villains are the intelligence agencies, military generals, folks like that</p>
	</aside>
</section>

<section data-background-image='img/no_idea_what_im_doing.jpg'>
	<h1>3000 BCE - 1949 AD</h1>
	<h1>&nbsp</h1>
	<h1>&nbsp</h1>
	<h1>&nbsp</h1>
	<aside class='notes'>
		<p>it's hard to talk about early crypto, because so much of it is so bad</p>
		<p>not much is very notable</p>
		<p>every system was fundamentally flawed in one way or another</p>
		<!-- <p>sometimes the systems were flawed in every possible way we can think of</p> -->
	</aside>
</section>

<section data-background-image='img/kenngruppenheft.jpg'>
	<h2>&nbsp</h2>
	<h2>&nbsp</h2>
	<h1 style='color: black;'>weak</h1>
	<h1 style='color: black;'>protocols</h1>
	<aside class='notes'>
		<p>they relied on weak protocols</p>
		<p>it didn't matter matter how good the scrambling was, the impelementation was poor</p>
		<p>a lot of the time the systems depended on keeping the design secret</p>
		<p>or keeping the code book out of your enemies hands, which is tough when your enemy is willing to shoot you</p>
		<p>once these systems were broken not only are some of the future messages exposed, all the previous messages are exposed</p>
		<p>worse still, someone can now impersonate soldiers in the field until you get a new codebook out</p>
	</aside>
</section>

<section data-background-image='img/colossus_computer_wheels.jpg'>
	<h2>&nbsp</h2>
	<h2>&nbsp</h2>
	<h2>&nbsp</h2>
	<h2>&nbsp</h2>
	<h2>&nbsp</h2>
	<h2>&nbsp</h2>
	<h1>FIRST COMPUTERS</h1>
	<aside class='notes'>
		<p>some of the first really big computers were built to exploit the weaknesses in early crypto</p>
		<p>for example, the known plaintext attack - one side would lay mines then wait for the other side to clear the mines then send an encrypted communication saying "all clear"</p>
		<p>if you could get a message you knew said "all clear" then you could reverse engineer the secret codes for the day</p>
	</aside>
</section>

<section data-background-image='img/homer_joint.gif'>
	<h1>information theory</h1>
	<h1>&nbsp</h1>
	<h1>&nbsp</h1>
	<h4>1949</h4>
	<aside class='notes'>
		<p>making ciphers was hard until 1949</p>
		<p>the language necessary to describe modern cryptosystems was invented in 1949</p>
		<p>mathematicians formalized the tools necessary to describe information transfer, storage, things like compression</p>
	</aside>
</section>

<section data-background-image='img/burns_snake.gif'>
	<h3>1951 - 1970</h3>
	<aside class='notes'>
		<p>Around the same time in 1951 the NSA is founded.</p>
		<p>During the period between 1951 and about 1970 the NSA is feeling good.</p>
		<p>Anyone who wants to work on cryptography goes and works for them.</p>
		<p>They control the funding mechanisms for cryptography.</p>
		<p>They can also delcare patent applications to be classified in the name of national security.</p>
		<p>All the knowledge about serious crypto is kept by them.</p>
		<p>They built cryptosystems to be used by spies and the military.</p>
		<p>If you wanted to work on these things you needed to agree with the philosophy behind those organizations.</p>
	</aside>
</section>

<section data-background-image='img/skinner_money.gif'>
	<h1>early 70's</h1>
	<aside class='notes'>
		But During the early 70's banking was becoming computerized, and commerce demanded a way to perform secure wire transfers.
	</aside>
</section>

<section data-background-image='img/burns_float.gif'>
	<h1>1975</h1>
	<h1>&nbsp</h1>
	<h1>&nbsp</h1>
	<h1>DES</h1>
	<aside class='notes'>
		<p>In 1975 we get DES.</p>
		<p>DES is the first serious attempt at a widespread standard for data security.</p>
		<p>It was successfully impelmented in chip, which made it easy to sell and use.</p>
		<p>HBO used DES to scramble the signal when transmitting it over satellite.</p>
		<p>Even though the NSA was involved in the design of the cipher, the only real weakness in DES is that it shipped with a 56 bit key strength.</p>
		<p>The designers wanted a 128 bit length key, but hardware concerns limited it to 64 bit, and government interference got it down to 56 bits.</p>
	</aside>
</section>

<section>
	<h1>strength</h1>
	<div style='text-align: left;'>
		<div style='width: 100%; height: 10%; background-color: green; margin: 1%; padding: 1%;'>56 bit</div>
		<div style='width: 50%; height: 10%; background-color: green; margin: 1%; padding: 1%;'>55 bit</div>
		<div style='width: 25%; height: 10%; background-color: green; margin: 1%; padding: 1%;'></div>
		<div style='width: 12%; height: 10%; background-color: green; margin: 1%; padding: 1%;'></div>
		<div style='width: 6%; height: 10%; background-color: green; margin: 1%; padding: 1%;'></div>
	</div>
	<aside class='notes'>
		Each single bit reduction cuts the strength in half.  100 bit is twice as strong as 99 bit.  99 bit twice as strong as 98.
		So think about the reduction in strength from 128 to 56.
	</aside>
</section>

<section>
	<h1>symmetric cryptography</h1>
	<aside class='notes'>
		DES is a type of symmetric cryptography
	</aside>
</section>

<section>
	<div style='margin-left: 10%; width:80%;'>
		<h3 style='background-color: rgb(66,255,66); color: black;'>plain text</h3>
		<h3 style='background-color: rgb(33,66,255)'>key</h3>
		<h3 style='background-color: rgb(255,66,33)'>encipher</h3>
		<h3 style='background-color: rgb(255,33,33); color: black;'>cipher text</h3>
		<h3 style='background-color: rgb(255,66,33)'>decipher</h3>
		<h3 style='background-color: rgb(33,66,255)'>key</h3>
		<h3 style='background-color: rgb(66,255,66); color: black;'>plain text</h3>
	</div>
	<aside class='notes'>
		<p>Symmetric cryptography is the easier to understand type of encryption.</p>
		<p>You have a key and an scrambling algorithm.</p>
		<p>You combine your data, the key, and the algorithm and you scramble your data.</p>
		<p>The recipient takes the same key and a reverse process to unscramble the data to recover the plaintext</p>
		<p>If you can keep the key secret, this works really well.</p>
	</aside>
</section>

<section data-background-image='img/homer_typing_bed.gif'>
	<h1>&nbsp</h1>
	<pre><code class='hljs'>
  const c = require('crypto')	// es6... (e_e)
  c.getCiphers()

  // (partial results)

	[ "aes128","aes192","aes256","blowfish",
	 "camellia128","camellia192","camellia256","cast",
	 "des","des3","desx","idea","rc2","rc2-40-cbc",
	 "rc2-64-cbc","rc4","rc4-40","seed" ]

</code></pre>
	<aside class='notes'>
		DES is still around.
		You can find it and other symmetric ciphers in nodejs by running getCiphers()
		This functionality is available to node because we link OpenSSL during compilation.
		Node crypto is powered by openssl.
	</aside>
</section>


<section data-background-image='img/burns_phone.gif'>
	<h1>☎☈☏</h1>
	<h1>secure telephony</h1>
	<aside class='notes'>
		<p>Big Mainframes needed secure communications.</p>
		<p>They also needed a way to store information securely at rest.</p>
		<p>IBM Researchers with the assistance of the NSA created DES, a block-cipher, which took a fixed block of bytes, and performed multiple rounds of permutations.</p>
		<p>Specifically the permutations are multiple rounds of shuffling and substitution.</p>
	</aside>
</section>

<section data-background-color='white'>
	<h1 style='color: black;'>s-box</h1>
	<img src='img/s-box.png'></img>
	<aside class='notes'>
		<p>This is the hardest to understand part of modern symmetric encryption.</p>
		<p>Each round of encryption you take a chunk of bytes, and perform a lookup operation with the values themselves.</p>
		<p>You take your current value, and use it to find the new value.</p>
		<p>Your chunk is 68. Go find (6, 8) > 45.  Now next round your chunk is 45.</p>
		<p>Do that 12 or 16 times combined with a shuffle operation after each step and you have the makings of a strong block cipher.</p>
		<p>These s-boxes are hardcoded, and the values in the s-boxes are what makes them strong.</p>
		<p>The NSA provided the s-boxes for DES.</p>
		<p>Since the operation is so complex there is no way to verify that there is no hidden trap door in the values</p>
		<p>Does the NSA have a special set of decoder s-boxes that allow them to more quickly guess your key?</p>
	</aside>
</section>

<section>
	<h1>des example</h1>
<pre><code class='hljs'>var crypto = require('crypto'); var assert = require('assert')
var key = 'p4ssw0rd'; var message = 'hello cascadiafest!'

// encrypt
var cipher = crypto.createCipher('des', key)
var cipher_text = cipher.update(message, 'utf8', 'hex')
cipher_text += cipher.final('hex')

// decrypt
var decipher = crypto.createDecipher('des', key)
var plain_text = decipher.update(cipher_text, 'hex', 'utf8')
plain_text += decipher.final('utf8')

assert.equal(plain_text, message)
</code></pre>
	<aside class='notes'>
		<p>So back to DES... it was a hit, we still use a version of it today.</p>
		<p>Even though the NSA reduced the key size in their recommendation, it was secure and widespread.</p>
		<p>It put cryptography outside of the realm of the military and spies.</p>
	</aside>
</section>

<section data-background-image='img/homer_jug_thinking.gif'>
	<h1>late 1970s</h1>
	<h1><br><br><br><br></h1>
	<aside class='notes'>
		<p>This got everyone thinking hard about everything to do with codes and ciphers.</p>
		<p>Where can we apply these ideas and make money?</p>
	</aside>
</section>

<section data-background-image='img/homer_rasta_walk.gif'>
	<h1>&nbsp</h1>
	<h1>&nbsp</h1>
	<h1>&nbsp</h1>
	<h1>1976</h1>
	<aside class='notes'>
		<p>It wasn't all commerce and banking.  A bunch of these types of folks got involved.</p>
		<p>Californians...</p>
		<p>Whit Diffie and Martin Hellman published a seminal paper on public key cryptography.</p>
	</aside>
</section>

<section>
	<h1><strike>symmetric</strike></h1>
	<h1>asymmetric encryption</h1>
	<aside class='notes'>
		<p>They and a bunch of smart folks focused on the most obvious limitations of symmetric crypto which is that no matter how strong the cipher is your key needs to be stored in more than one place and can be leaked.</p>
		<p>Their solution is to break the key up into two parts.</p>
		<p>Where one part could be leaked, or even publicized.  And one part would be kept secret.  </p>
		<p>All you would need to encrypt a message for that person is their publicly available information.</p>
	</aside>
</section>

<section>
	<h1>one way functions</h1>
	<aside class='notes'>
		the secret to this lies in a concept in math called the one-way-function
	</aside>
</section>

<section>
	<h1>a = b + c</h1>
	<h1>b = a - c</h1>
	<h1>c = a - b</h1>
	<h3>easy</h3>
	<aside class='notes'>
		<p>this isn't a two-way function, that's something else entirely, these are examples of not one-way-functions</p>
		<p>given components of one equation you can derive all the other fields by performing operations from thE inverse property of that operator</p>
		<p>easy stuff</p>
	</aside>
</section>

<section>
	<h1>a<sup>x</sup> = c</h1>
	<h3>given A and C</h3>
	<h3>solve for X</h3>
	<h1>not easy</h1>
	<aside class='notes'>
		<p>this becomes an issue when your equation looks like this</p>
		<p>that exponent, x, really complicates matters</p>
		<p>there isn't an efficient one-step solution to this problem, and that's what they leveraged</p>
	</aside>
</section>

<section>
	<h5>diffie-hellman key generation</h5>
	<h1>g<sup>x</sup> mod p = public</h1>
	<h3>you are given G and P</h3>
	<h3>choose a large X</h3>
	<h3>it is your secret</h3>
	<aside class='notes'>
		<p>this is the diffie hellman key genearation,</p>
		<p>the first really successful public key encryption algorithm</p>
		<p>g and p are agreed upon by both parties, and everyone picks their own value for X and keeps it secret</p>
	  <p>then they run the X through the equation and publish the result, the public number</p>
		<p>what is mod? I'll show you!</p>
	</aside>
</section>

<section>
	<h4>math</h4>
	<hr>
	<h1>5 mod 2 = 1</h1>
	<h2>2 √ 5 = 2, remainder 1</h2>
	<hr>
	<h1>6 mod 2 = 0</h1>
	<h2>2 √ 6 = 3, remainder 0</h2>
	<hr>
	<aside class='notes'>
		really quick, mod describes the remainder of a division operation
		so five mod two is 5 divided by 2, which is two, with the remainder is 1
		4 mod 2 is 4 divided by 2, which is 2 remainder zero
		3 mod 1 is one
		2 mod 2 is zero
	</aside>
</section>

<section>
	<h1><span style='color: white;'>g</span><sup style='color: rgb(33,66,255);'>x</sup><span style='color: white;'> mod p</span> = <span style='color: rgb(33,66,255);'>pub1</span></h1>
	<h1><span style='color: white;'>g</span><sup style='color: rgb(33,255,66);'>y</sup><span style='color: white;'> mod p</span>= <span style='color: rgb(33, 255, 66);'>pub2</span></h1>
	<h1>
	<span style='color: rgb(33, 255, 66);'>pub2</span><sup style='color: rgb(33,66,255);'>x</sup>
	<span style='color: white'> mod p = </span>
	<span style='color: rgb(255,66,33);'>c</h1>
	<h1>
		<span style='color: rgb(33,66,255);'>pub1</span><sup style='color: rgb(33,255,66);'>y</sup>
		<span style='color: white;'> mod p =</span>
		<span style='color: rgb(255,66,33);'>c
	</h1>
	<aside class='notes'>
		<p>so this is the key exchange</p>
		<p>one person picks a value for X and publishes the pub1 value</p>
		<p>another person picks their own exponent value, Y, and publishes the pub2 value</p>
		<p>person 1 takes pub2 and their exponent and arrives at c</p>
		<p>the other person does the same but with their respective bits and arrives at the same C value</p>
		<p>the only way for a 3rd party to derive C given PUB1 and PUB2 is to guess X or Y</p>
		<p>if your X or Y values are big enough that's just infeasible</p>
	</aside>
</section>

<section>
	<h1>g<sup>x</sup> mod p = a</h1>
<pre><code class='hljs'>const crypto = require('crypto');

// Generate Alice's keys...
const alice = crypto.createDiffieHellman(2048);
// or const alice = crypto.getDiffieHellman('modp14');
const alice_key = alice.generateKeys();

// a = (g ^ x) mod p
alice_key.getPublicKey()   // a
alice_key.getGenerator()   // g
alice_key.getPrivateKey()  // x
alice_key.getPrime()       // p

// shared secret, c
alice_key.computeSecret(bob.getPublicKey())
</code></pre>
	<aside class='notes'>
	  <p>this is all that information I just described in node.js code</p>
		<p>diffie hellman does not have many components</p>
		<p>publishing your diffie hellman public key is really just posting the result of a math equation</p>
	</aside>
</section>

<section data-background-image='img/homer_barney_harmonica.gif'>
	<h1>&nbsp</h1>
	<h1>&nbsp</h1>
	<h1>&nbsp</h1>
	<h1>shared secret</h1>
	<aside class='notes'>
	  <p>Diffie Hellman itself does not do any encryption.</p>
		<p>It just allows two parties arrive at a secret shared number given each others public numbers.</p>
	</aside>
</section>

<section data-background-image='img/cat_fire.gif'>
	<h1></h1>
	<aside class='notes'>
		<p>Asymmetric cryptography solves the problem of having to transmit your symmteric key to the other party, at least in the clear.</p>
		<p>Your shared secret is the key to your symmetric cipher.</p>
		<p>All modern cryptosystems are combinations of symmetric and asymmteric crypto.</p>
	</aside>
</section>

<section data-background-image='img/kids_fruit_race.gif'>
	<h1>diffie-hellman 1976</h1>
	<h1>rsa 1977</h1>
	<h1>(dsa 1991)</h1>
	<aside class='notes'>
		<p>After the Diffie Hellman key exchange paper was published, the RSA algorithm was published.</p>
		<p>RSA took DH a few steps further beyond key generation and exchange protocol.</p>
		<p>It also defined an encryption and decryption mechanism.</p>
		<p>This slide also honorably mentions DSA which is a signature only algorithm invented by the NSA in 1991</p>
	</aside>
</section>

<section data-background-image='img/homer_woop_woop.gif'>
	<h1>&nbsp</h1>
	<h1>&nbsp</h1>
	<h1>&nbsp</h1>
	<h1>RSA Security Inc</h1>
	<h1>founded, 1982</h1>
	<aside class='notes'>
		<p>In 1982 RSA founded to commercialize public key encryption.</p>
		<p>They negotiated use of the patent from MIT and set to work.</p>
		<p>The patent on RSA expired in september of 2000.</p>
	</aside>
</section>

<section data-background-image='img/homer_laughing.gif'>
<h1>1983</h1>
	<h1>hardware company</h1>
	<aside class='notes'>
	<p>They felt they had a problem.</p>
		<p>Customers could not understand their product.</p>
		<p>Symmteric encryption is easy, a key locks and unlocks a door.</p>
	  <p>Asymmetric encryption is college level math.</p>
		<p>There are mulitple keys, and multiple steps to using them.</p>
		<p>Your key becomes a different key when used in someone else's lock.</p>
		<p>Everyone shares a different secret.</p>
		<p>RSA wanted to simpifly things.  Put it on a chip.  Ship it in a box.</p>
		<p>It didn't work.  </p>
		<p>It would have been one of the most complicated single chip design by a factor of 10</p>
		<p>it came off the line and didn't work at all</p>
	</aside>
</section>

<section data-background-image='img/homer_laughing_skeletons.gif'>
	<h1>1985</h1>
	<h1>software company</h1>
	<aside class='notes'>
		They shifted away from chip making and focused on licensing the
		technology in other products.  Your email would be protected by RSA and
		there would be a sticker on the box for your email program, RSA Inside.
	</aside>
</section>

<section >
	<h1><span style='color: rgb(33,255,66);'>CT</span> = <span style='color: rgb(255,255,66);'>PT</span><sup style='color: rgb(33,66,255);'>e</sup> mod <span  style='color: rgb(33,66,255);'>n</span></h1>
	<h1><span style='color: rgb(255,255,66);'>PT</span> = <span style='color: rgb(33,255,66);'>CT</span><sup style='color: rgb(255,66,33);'>D</sup> mod <span  style='color: rgb(33,66,255);'>n</span></h1>
	<h1 style='color: rgb(33,66,255);'>public key (e,n)</h1>
	<h1 style='color: rgb(255,66,33);'>private key (d)</h1>
	<aside class='notes'>
		<p>This is the RSA algorithm.</p>
		<p>RSA is different from diffie-hellman in that it doesn't rely on the shared secret model.</p>
		<p>RSA has a key generation routine, which I'm not describing here.</p>
		<p>RSA ships with encryption and decryption operations.</p>
		<p>To use RSA you just generates a random string of data.</p>
		<p>That random string is your symmetric key.</p>
		<p>Then you encrypt that string using the RSA public key of your recipient.</p>
		<p>That random string of data is the key to your symmetric cipher.</p>
		<p>The recipient recovers the symmetric key using their private key, and decrypts the data packet.</p>
	</aside>
</section>

<section>
	<div style='display: block;'>
	<div style='width:40%; display: inline-block;'>
		<h4>symmetric</h4>
		<h3 style='background-color: rgb(66,255,66); color: black;'>plain text</h3>
		<h3 style='background-color: rgb(33,66,255)'>key</h3>
		<h3 style='background-color: rgb(255,66,33)'>encipher</h3>
		<h3 style='background-color: rgb(255,33,33); color: black;'>cipher text</h3>
		<h3 style='background-color: rgb(255,66,33)'>decipher</h3>
		<h3 style='background-color: rgb(33,66,255)'>key</h3>
		<h3 style='background-color: rgb(66,255,66); color: black;'>plain text</h3>
	</div>
	<div style='width:40%; display: inline-block;'>
		<h4>asymmetric</h4>
		<h3 style='background-color: rgb(66,255,66); color: black;'>plain text</h3>
		<h3 style='background-color: rgb(33,66,255)'>public key</h3>
		<h3 style='background-color: rgb(255,66,33)'>encipher</h3>
		<h3 style='background-color: rgb(255,33,33); color: black;'>cipher text</h3>
		<h3 style='background-color: rgb(255,66,33)'>decipher</h3>
		<h3 style='background-color: rgb(33,66,255)'>private key</h3>
		<h3 style='background-color: rgb(66,255,66); color: black;'>plain text</h3>
	</div>
</div>
  <aside class='notes'>
		<p>Laid out like this you can see why one is called asymmetric.</p>
		<p>Where you would most often find visible asymmetric crypto is in email.</p>
		<p>You would take someone else's public key and encrypt a message only they could decrypt.</p>
		<p>The recipient takes their private key and deciphers the data to recover it.</p>
		<p>When you do that, if you still want to make the message readable by you - say in your sent folder - you encrypt two copies.  One with their public key, and one with yours.</p>
	</aside>
</section>

<section>
	<div style='width:60%; display: inline-block;'>
		<h4>sign & verify</h4>
		<h3 style='background-color: rgb(66,255,66); color: black;'>plain text</h3>
		<h3 style='background-color: rgb(33,66,255)'>private key</h3>
		<h3 style='background-color: rgb(255,66,33)'>sign</h3>
		<h3 style='background-color: rgb(255,33,33); color: black;'>signature</h3>
		<h3 style='background-color: rgb(255,66,33)'>verify</h3>
		<h3 style='background-color: rgb(33,66,255)'>public key</h3>
		<h3 style='background-color: rgb(66,255,66); color: black;'>plain text</h3>
	</div>
	<aside class='notes'>
		<p>Another feature of RSA is the signature and verification routines.</p>
		<p>Sign and verify are kind of the reverse of what I just described.</p>
		<p>Instead of you encrypting a message for me using my public key, I encrypt a message for you using my private key.</p>
		<p>You then verify I sent the message by decrypting the signature with my public key.</p>
	  <p>Only someone with my private key could make a signature that is verified with my public key.</p>
	</aside>
</section>


<section>
	<h4>sign and verify example</h4>
<pre><code class='hljs'>const crypto = require('crypto'); const fs = require('fs')
var private_key = fs.readFileSync('./4096_private.dat')
var public_key = fs.readFileSync('./4096.pub')
var message = 'secret message'

var sign = crypto.createSign('RSA-SHA256')
sign.update(message)

var signature = sign.sign(private_key, 'hex')

var verify = crypto.createVerify('RSA-SHA256')
verify.update(message)

assert.equal(verify.verify(public_key, signature, 'hex'), true)</code></pre>
	<aside class='notes'>
		<p>Here is what I just talked about as code in nodejs.</p>
		<p>You load the keys, from disk.  You have a message string.</p>
		<!-- <p>You create a sign object and update the object with the message,</p> -->
		<p>you call the sign method and pass your private key</p>
		<p>You send your message, your signature, and your public key to the other party</p>
		<!-- <p>the other party can create a verify object, update it with the message</p> -->
		<p>they then verify the message using the public key and the signature</p>
	</aside>
</section>

<section>
<h1>generate keys</h1>
<pre><code class='bash'># generate private key
openssl genrsa -out 4096_private.dat 4096
# generate public key
openssl rsa -in  4096_private.dat -pubout > 4096.pub
</code></pre>
	<aside class='notes'>
		<p>node core doesn't let you create rsa keys</p>
		<p>you need an addon to make new rsa keys</p>
		<p>it expects you to have run the openssl command and use static keys</p>
	</aside>
</section>

<section data-background-image='img/pets_dancing.gif'>
	<h1>1989</h1>
	<h1>lotus notes</h1>
	<aside class='notes'>
		<p>Back to the story... </p>
		<p>In 1989 RSA is licensed to be used in Lotus Notes.  </p>
		<p>They wanted to use a combination of RSA and DES for the encryption but the NSA would not allow them to export DES. </p>
		<p>So the RSA people invented the RC-2 cipher at two strengths, 64bit and 40 bit. </p>
	</aside>
</section>

<section data-background-image='img/homer_typing_bed.gif'>
	<h1>&nbsp</h1>
	<pre><code class='hljs'>
  const c = require('crypto')	// es6... (e_e)
  c.getCiphers()

  // (partial results)

	[ "aes128","aes192","aes256","blowfish",
	 "camellia128","camellia192","camellia256","cast",
	 "des","des3","desx","idea",
	 "rc2",
	 "rc2-40-cbc",
	 "rc2-64-cbc",
	 "rc4",
	 "rc4-40",
	 "seed" ]

</code></pre>
	<aside class='notes'>
		<p>Remember this slide where I show you how to list the ciphers? </p>
		<p>Notice the 40 after RC2 and RC4?  Those are export strengths. 40 bit.</p>
		<p>That is the fingerprints of the politics of the early 90s baked into your node dot js </p>
		<p>See the 256 on aes?  Those are comparable numbers. 41 is twice as strong as 40, all the way up to 256.</p>
		<p>If the fight against strong encryption is lost you will see the numbers in getCiphers get smaller </p>
	</aside>
</section>

<section data-background-image='img/homer_snakes_box.gif'>
	<h1>1991</h1>
	<h1>pgp</h1>
	<aside class='notes'>
		<p>we're kind of blasting through the timeline here because you would not believe how long it took for them to write and release this software</p>
		<p>but pgp version 1.0 released using a combination of RSA and a symmetric cipher called bassomatic</p>
		<p>yes from the saturday night live sketch</p>
	</aside>
</section>

<section data-background-image='img/International_Data_Encryption_Algorithm_InfoBox_Diagram.svg.png'>
	<h1>&nbsp</h1>
	<h1>1992, pgp v2</h1>
	<aside class='notes'>
		<p>version 2 used stronger RSA keys and a new symmetric cipher called idea</p>
		<p>or international data encryption algorithm that used a 128 bit key and was invented in germany</p>
		<p>idea was patented but free for non commercial use, the patent expired in 2012</p>
	</aside>
</section>

<section data-background-image='img/bart_lisa_fighting.gif'>
	<h1>1993</h1>
	<aside class='notes'>
		<p>in 1993 RSA reports the PGP creators to the us export and customs for violating the rsa patent</p>
	</aside>
</section>

<section data-background-image='img/homer_beehive_smile.gif'>
	<h1></h1>
	<aside class='notes'>
		<p>the pgp creator then sells pgp to a company that owns a license for RSA neutralizing that problem</p>
	</aside>
</section>

<section data-background-image='img/homer_cops_bumpercar.gif'>
	<aside class='notes'>
	  <p>but just a month later the San Jose customs office opens up a formal criminal investigation</p>
		<p>regarding the illegal export of a munitions without a license</p>
		<p>then in 1997 the case closes with no charges filed</p>
		<p>it's all just threats and intimidation</p>
		<p>I had a hard time researching hard concrete details about this talk because there is very little in the way of publicly available court proceedings</p>
		<p>You can't find a listing of what was and wasn't considered illegal at the time because it was entirely at the discretion of opaque government entities that would swing back and forth their interpretation of the current state of affairs</p>
		<p>the law was being practiced through secret letters and memos</p>
	</aside>
</section>

<section data-background-image='img/burns_alien.gif'>
	<h1>key escrow</h1>
	<aside class='notes'>
		<p>so rewind a bit...</p>
		<p>it's 1993 so the whole time they are investigating email and software people for their strong encryption the government is pushing their solution for all this mess they have created</p>
		<p>the solution is key escrow,</p>
		<p>embodied in a device called the clipper chip </p>
		<p>a clipper chip or something like it would be built into your phone, and before you could make an encrypted connection with your 2nd party, a 3rd party would be given some or all of the symmetric keys to your encrypted communications</p>
	</aside>
</section>

<section data-background-image='img/burns_icedcream.gif'>
	<h1>&nbsp</h1>
	<h1>&nbsp</h1>
	<h1>&nbsp</h1>
	<h1>&nbsp</h1>
	<h1>trust us</h1>
	<aside class='notes'>
		<p>so if law enforcement needed the contents of an encrypted wiretap</p>
		<p>(which would sound like a wall of hissing)</p>
		<p>they could supoena the key from the 3rd party and get the information they wanted</p>
		<p>the people proposing this idea constantly harp on this idea of "trust us, if you only knew what we knew"</p>
		<p>well during this time we got some citizens to review the information the NSA is always teasing</p>
		<p>it's bunk</p>
		<p>the citizen review panel came back with a big shrug about not much compelling evidence</p>
	</aside>
</section>

<section data-background-image='img/homer_otto_catbus.gif'>
	<h1>nope</h1>
	<aside class='notes'>
		<p>nobody wanted on this train, not commerce, not the public</p>
		<p>not even after the government said consumers could choose who stored their keys</p>
		<p>the big idea was that banks would keep them</p>
		<p>imagine if your API services involved contacting a bank with every transaction</p>
	</aside>
</section>

<section data-background-image='img/homer_cereal_fail.gif'>
	<h1></h1>
	<aside class='notes'>
		<p>the real nail in the coffin for key escrow was that the implementations failed miserably under the smallest bit of scrutiny</p>
		<p>on the first day looking researchers were able to bypass the mechanisms that enforced the key escow</p>
		<p>the first crack meant waiting 40 minutes on hold while the connection was brute forced</p>
	</aside>
</section>

<section data-background-image='img/homer_falls_down.gif'>
	<h1></h1>
	<aside class='notes'>
		<p>all of this was taking place in the media and the court of public opinion</p>
		<p>the moment the news cycle shifted to the idea that the clipper chip is broken and key escrow doesn't work the government drops their pressure</p>
	</aside>
</section>

<section data-background-image='img/people_cheer_pot.gif'>
	<h1>liberalization</h1>
	<aside class='notes'>
		<p>there is this whole period of liberalization after the clipper is hacked</p>
		<p>1996 An executive order comes down that transfers control of crypto from munitions regulators to the commerce department, you just ask for certifications for internal distribution and you are generally granted them</p>
		<p>1997 Banks are allowed unrestricted encryption access without key recovery, also you can export 56 bit crypto instead of 40 bit</p>
		<p>1998 Al Gore is about to start his campaign for president and they issue a memo basically making it a free-for-all in terms of strength and streamlines the process for export approval</p>
	</aside>
</section>

<section data-background-image='img/lisa_meats_hotdog.gif'>
	<h1>review</h1>
	<aside class='notes'>
		<p>crypto is more than just the math, or key generation steps</p>
		<p>it's the implementation of a set of protocols that define
		  key generation,
			key distribution,
			rings of trust and verification,
			handshake protocols,
			trusted and untrusted pipes</p>
		<p>every step brings with it benefits and drawbacks</p>
		<p>you can't just say "Oh I'll use RSA and AES" and leave it at that</p>
		<p>all the parties have to agree on every detail or things don't work at all</p>
		<p>future versions of software have to support the standard that created old messages or those old messages won't be readable</p>
		<p>your encryption protocol also has to work in the real world, on untrusted networks, that time out... so every step in your protocol needs special attention paid as invisible changes in underlying configurations can leave your implementation weak</p>
		<p>did your ISP change how packets are routed and now you are leaking your keys?</p>
		<p>can your software handle untrusted networks or does it expect everyone to be law abiding</p>
		<p>we trust our ISPs to not attack our connections, but that isn't the case for many internet users</p>
	</aside>
</section>

<section data-background-image='img/homer_wave.gif'>
	<h1>Today</h1>
	<aside class='notes'>
		<p>Today the attacks don't really focus on the underlying ciphers, they attack the implementation</p>
		<p>The FBI didn't ask Apple for some master key.</p>
		<p>The FBI asked Apple to build a version of IOS that breaks their implementation.</p>
		<p>The people that broke the encryption didn't crack the key so much as remove the negative consequences of guessing too many times</p>
		<p>If it had been an updated model the implementation would have been resistant to that attack</p>
		<p>Other places are pushing for logging that neturalizes security altogether.</p>
		<p>Snoopers Charter in the UK would require you to log all your sessions, every piece of information for every handshake, did you download an icon?  That's a unique session key and that needs to be logged and stored for half a year.</p>
		<p>In Russia the new law is a year of retention and they are seizing hardware of vpn providers.</p>
		<p></p>
	</aside>
</section>

<section data-background-image='img/dishes.jpg'>
	<h1>they are watching</h1>
	<aside class='notes'>
		<p>This is what we are up against.</p>
		<p>It is pervasive surveillance.</p>
		<p>they will build arrays of antennas in backwater nowheres just to get better coverage of the sky</p>
	</aside>
</section>

<section>
	<h1></h1>
	<img src='img/Worldwide_NSA_signals_intelligence.jpg'></img>
	<aside class='notes'>
		<p>they are intercepting your data at almost every opportunity</p>
		<p>you may trust the intentions of the people at the highest levels of goverment but many programs live in a gray area from previous administrations</p>
		<p>just because the new better person is in the white house doesn't mean that general with the nasty motivation has been replaced</p>
	</aside>
</section>

<section>
	<h1>real-time attacks</h1>
	<img src='img/nsa-crack-encryption.png'></img>
	<aside class='notes'>
		<p>they can attack your implementations in real-time</p>
		<p>I wanted to do some live cracking in this talk but I couldn't make it not a waste of time</p>
		<p>how many of you already spend a large portion of your lives sitting in front of tasks watching them go to 100% completion</p>
		<p>I included code in the repo for the talk that lets you crack your own keys at different strengths so you can do this when there is more time</p>
		<p>I will describe what it means to crack some keys</p>
	</aside>
</section>

<section data-background-image='img/Board300.jpg'>
	<h1></h1>
	<aside class='notes'>
		<p>this is a machine built by the EFF to demonstrate how cheap it would be to crack DES</p>
		<p>this is how you attack symmteric cryptography, with custom hardware</p>
		<p>the hardware searches the key space and compares the output to a set of parameters</p>
		<p>if you are expecting to see ascii text you would pipe the output to a detector software and review all the tries that had only ascii</p>
		<p>in the repo for this talk I have a DES cracking routine that will do 30,000 keys per second on my fast desktop</p>
		<p>this device did 90 billion</p>
	</aside>
</section>

<section>
	<h1>cracking DH</h1>
	<h5>diffie-hellman key generation</h5>
	<h1><span style='color: rgb(33,255,66);'>g</span><sup style='color: rgb(255,33,66);'>x</sup> mod <span style='color: rgb(33,255,66);'>p</span> = public</h1>
	<aside class='notes'>
		<p>Diffie Hellman is super easy to crack in that all you have to do is guess X, you have a persons public number, g and p</p>
		<p>You verify you got X correct by running the equation, and if you get the public number you got X correct</p>
	</aside>
</section>

<section>
	<h6>diffie-hellman key generat</h6>
	<h1><span style='color: rgb(33,255,66);'>g</span><sup style='color: rgb(255,33,66);'>1</sup> mod <span style='color: rgb(33,255,66);'>p</span> = 998</h1>
	<h1><span style='color: rgb(33,255,66);'>g</span><sup style='color: rgb(255,33,66);'>2</sup> mod <span style='color: rgb(33,255,66);'>p</span> = 861</h1>
	<h1><span style='color: rgb(33,255,66);'>g</span><sup style='color: rgb(255,33,66);'>3</sup> mod <span style='color: rgb(33,255,66);'>p</span> = 320</h1>
	<h1><span style='color: rgb(33,255,66);'>g</span><sup style='color: rgb(255,33,66);'>4</sup> mod <span style='color: rgb(33,255,66);'>p</span> = 118</h1>
	<aside class='notes'>
		<p>most everyone uses the same g and p values in diffie hellman</p>
		<p>they are literally published as a standard, diffie hellman group 14 specifies 2048 bit values for g and p</p>
		<p>this means means you can precompute all the values for X ahead of time</p>
		<p>so when you see a public number in the wild you may have already computed the X value and saved it somewhere</p>
	</aside>
</section>

<section data-background-image='img/Titan_render.png'>
	<h1>&nbsp</h1>
	<h1>&nbsp</h1>
	<h1>&nbsp</h1>
	<h1>super computers</h1>
	<aside class='notes'>
		<p>our largest supercomputers spend a lot of time doing this work</p>
		<p>odds are some of your most mundane traffic has been cracked by some of the most sophisticated computing rigs, then dropped on the floor</p>
	</aside>
</section>

<section>
	<h1>weakdh.org</h1>
	<aside class='notes'>
		<p>there is a lot more info about attacking diffie hellman at this website</p>
	</aside>
</section>


<section>
	<h1>cracking rsa</h1>
	<h2><span style='color: rgb(255,255,66);'>PT</span> = <span style='color: rgb(33,255,66);'>CT</span><sup style='color: rgb(255,66,33);'>D</sup> mod <span  style='color: rgb(33,66,255);'>n</span></h2>
	<h2>
		<span style='color: rgb(255,66,33);'>private key (d)</span>
		<span style='color: rgb(33,66,255);'>public key (n)</span>
	</h2>
	<h1><span style='color: rgb(33,66,255)'>n</span> = p * q</h1>
	<h1><span style='color: rgb(255,66,33);'>d</span> = φ(p, q)</h1>
	<aside class='notes'>
		<p>cracking RSA is about attacking the key generation routine</p>
		<p>I didn't describe the key generation, but it all starts with two big prime numbers p and q</p>
		<p>you get your public key by mutiplying them together, and the strength comes from the fact that there are only one p and q for your n </p>
		<p>the p and q values are also fed into a function that outputs the private key</p>
		<p>so if you can factor N and recover p and q, you can compute the value for D and start decoding traffic</p>
	</aside>
</section>


<section data-background-image='img/google-cloud-snowden-slide.jpg'>
	<aside class='notes'>
		<p>The awful thing is that they don't even need to spend millions of dollars decrypting your stuff.</p>
		<p>We transfer it in plaintext in trusted environments.</p>
		<p>How many of your services are only secure once they hit nginx?</p>
	</aside>
</section>

<section data-background-image='img/future_spin.gif'>
	<h1>&nbsp</h1>
	<h1>&nbsp</h1>
	<h1 style='color: rgb(66,255,66);'>how can you help?</h1>
	<aside class='notes'>
		<p>encrypt everything</p>
		<p>in your standups at work ask your peers what are they're doing to encrypt customer data</p>
		<p>then tell your customers that you are doing it, write a blog post about it</p>
		<p>security is an afterthought to customers, try to educate them</p>
		<p>if you are an indie dev, build encryption into your libraries and modules</p>
		<p>publicize the fact that your communication layers are encrypted</p>
		<p>make it easy for people to load their keys, give them examples</p>
		<p>in fact, make it mandatory, throw an error if they don't encrypt</p>
		<p>imagine if node dropped support for unencrypted http</p>
	</aside>
</section>

<section data-background-image='img/future.gif'>
	<h1>tomorrow</h1>
	<h1>&nbsp</h1>
	<h1>&nbsp</h1>
	<aside class='notes'>
		<p>I'm not sure really.  I just kind of wanted to have this slide and linger a bit...</p>
		<p>Quantum Computers are a real thing and they will eventually crack meaningful RSA keys</p>
		<p>Bad guys are collecting all the traffic they see and waiting for the day the skeleton key comes along that opens it up.</p>
		<p>An email from 10 years ago is still relevant if you are still mad about the thing that happened 10 years ago</p>
		<p>All you can do is try to not be an easy target.</p>
		<p>most real world attacks are not sophisticated</p>
		<p>unpatched servers, someone pops root, grabs some dot env files now they have your aws keys</p>
		<p>At the lowest level it is someone's crappy job to hack you.</p>
		<p>Some contractor has to pour over your data and find your alternate email address and world of warcraft username</p>
		<p>If you make it a little bit harder for them, they will give up</p>
		<p>If literally everyone used Tor and PGP and OTR Messaging our intelligence services would invest more money in human resources instead of mass surveillance.</p>
		<p>If it wasn't so easy for them to scoop up everything and call it a good day's work they would have better intelligence instead of the deluge of plaintext we provide them</p>
	</aside>
</section>

<section data-background-image='img/pizza_ception.gif'>
	<h1>thank you</h1>
	<aside class='notes'>
	</aside>
</section>

<!-- <section data-background-image='img/burns_i cedcream.gif'>
	<h1></h1>
	<aside class='notes'>
	</aside>
</section> -->

			</div>
		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>
		<script src="http://127.0.0.1:35729/livereload.js"></script>

		<script>
			// More info https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				history: true,


				// More info https://github.com/hakimel/reveal.js#dependencies
				dependencies: [
					{ src: 'plugin/markdown/marked.js' },
					{ src: 'plugin/markdown/markdown.js' },
					{ src: 'plugin/notes/notes.js', async: true },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } }
				]
			});
		</script>
	</body>
</html>
